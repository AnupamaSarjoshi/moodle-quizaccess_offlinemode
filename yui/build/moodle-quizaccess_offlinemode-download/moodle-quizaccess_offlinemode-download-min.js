YUI.add("moodle-quizaccess_offlinemode-download",function(e,t){M.quizaccess_offlinemode=M.quizaccess_offlinemode||{},M.quizaccess_offlinemode.download={SELECTORS:{QUIZ_FORM:"#responseform",LINK_CONTAINER:"#mod_quiz_navblock .othernav"},filename:null,form:null,link:null,init:function(t){this.filename=t,this.form=e.one(this.SELECTORS.QUIZ_FORM);if(!this.form)return;var n=e.one(this.SELECTORS.LINK_CONTAINER);if(!n)return;this.link=n.appendChild('<a download="'+t+'" href="#">Emergency response export</a>'),this.link.on("click",this.download_clicked,this)},download_clicked:function(){typeof tinyMCE!="undefined"&&tinyMCE.triggerSave(),this.link.set("href","data:text/plain;charset=US-ASCII;base64,"+this.base64_encode_unicode(e.IO.stringify(this.form)))},base64_encode_unicode:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}}},"@VERSION@",{requires:["base","node","event","node-event-delegate","io-form"]});
